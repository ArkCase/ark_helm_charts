# Defines log4j propeties
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "alfresco.shortname" . }}-dev-global-properties-configmap
data:
  alfresco-global.properties: |-
    jodconverter.enabled=false
    jodconverter.officeHome=null
    ldap.authentication.allowGuestLogin=false
    ldap.authentication.java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory
    ldap.authentication.java.naming.security.authentication=simple
    ldap.authentication.escapeCommasInBind=false
    ldap.authentication.escapeCommasInUid=false
    ldap.synchronization.queryBatchSize=100
    ldap.synchronization.attributeBatchSize=100
    synchronization.synchronizeChangesOnly=false
    synchronization.allowDeletions=true
    synchronization.syncWhenMissingPeopleLogIn=true
    ldap.synchronization.groupQuery=objectclass\=group
    ldap.synchronization.groupDifferentialQuery=(&(objectclass\=group)(!(modifyTimestamp<\={0})))

    #run in the future so that feeds don't flood the alf_activity_feed table
    activities.feed.notifier.cronExpression=0 0 0 ? * * 2099
    activities.post.cleaner.cronExpression=0 0 0 ? * * 2099
    activities.post.lookup.cronExpression=0 0 0 ? * * 2099

    ############################
    # from docker-compose.yaml
    ###########################
    index.subsystem.name=noindex
    local.transform.service.enabled=false
    transform.service.enabled=false
    csrf.filter.enabled=false
    system.workflow.engine.jbpm.enabled=false
    system.workflow.engine.activiti.enabled=false
    syncService.mode=OFF
    sync.mode=OFF
    sync.pullJob.enabled=false
    sync.pushJob.enabled=false
    system.usages.enabled=false
    system.usages.clearBatchSize=0
    activities.feed.notifier.enabled=false
    activities.feed.cleaner.enabled=false
    activities.post.cleaner.enabled=false
    activities.feed.generator.enabled=false
    activities.post.lookup.enabled=false
    replication.enabled=false
    transferservice.receiver.enabled=false
    #opencmis
    opencmis.context.override=true
    opencmis.context.value=
    opencmis.servletpath.override=true
    opencmis.servletpath.value=
    opencmis.server.override=true
    opencmis.server.value=https://kubetest.arkcase.com/alfresco/api
    system.thumbnail.generate=false

    #audit.rm.runas=admin

    # turn off metadata extraction
    # mail
    extracter.Mail.enabled=false
    # pdfs
    extracter.PDFBox.enabled=false
    # office types
    extracter.Office.doc.enabled=false
    extracter.Office.xls.enabled=false
    extracter.Office.ppt.enabled=false
    # images (no exif aspect)
    extracter.TikaAuto.enabled=false
    # docx,xlsx,pptx
    extracter.Poi.enabled=false

    # Enables Alfresco's custom JMX mbeans
    alfresco.jmx.connector.enabled=true
    alfresco.context=alfresco