---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  namespace: alfresco
  name: transform-core-aio
spec:
  replicas: 3
  template:
    spec:
      imagePullSecrets:
        - name: aws-arkcase-pull
      containers:
        - name: transform-core-aio
          image: 345280441424.dkr.ecr.ap-south-1.amazonaws.com/alfresco_transform_core:3.0.0
          env:
            - name: ACTIVEMQ_URL
              value: nio://activemq:61616
            - name: CORE_AIO_URL
              value: http://transform-core-aio:8090
            - name: FILE_STORE_URL
              value: http://shared-file-store:8099/alfresco/api/-default-/private/sfs/versions/1/file
            - name: JAVA_OPTS
              value: >-
                -XX:MinRAMPercentage=50
                -XX:MaxRAMPercentage=80
          ports:
            - containerPort: 8090
          resources:
            limits:
              memory: "1536m"
      restartPolicy: Always
