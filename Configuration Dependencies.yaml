################################################################################
# Here we list what secrets/configs each chart produces for consumption by other
# charts in the ecosystem. We add anchor names here so they can be referenced
# below without issue, and it's easier to navigate.
#
# With this guide it should be possible to create the configurations for all
# charts and subcharts, to be resolved at runtime.
################################################################################
produces:
  acme:
    conn-main: &acme-conn-main
      url: "https://acme:9000"
      cred-admin: &acme-main-cred-admin
        password: "some-generated-password"

  analytics: # Should we keep this?
    conn-main: &analytics-conn-main
      url:
      cred-admin: &analytics-main-cred-admin
        username:
        password:
      cred-access: &analytics-main-cred-access
        username:
        password:

  content:
    conn-main: &content-conn-main
      url:
      ui:
      cred-admin: &content-main-cred-admin
        username:
        password:
      cred-access: &content-main-cred-access
        username:
        password:

  core:
    conn-main: &core-conn-main
      hosts:
      cred-admin:  &core-main-cred-admin # Delegated to LDAP
        username:
        password:
      cred-access: &core-main-cred-access # Delegated to LDAP
        username:
        password:

  ldap:
    conn-main: &ldap-conn-main
      url: ...
      baseDn: ...
      domain: ...
      realm: ...
      groupsBaseDn: ...
      groupsFilter: ...
      groupsClass: ...
      groupsMemberAtt: ...
      groupsNameAtt: ...
      usersBaseDn: ...
      usersFilter: ...
      usersClass: ...
      usersNameAtt: ...
      usersMemberAtt: ...
      cred-admin: &ldap-main-cred-admin
        username: ...
        samAccount: ...
        password: ...
      cred-access: &ldap-main-cred-access
        username: ...
        samAccount: ...
        password: ...
    conn-portal: &ldap-conn-portal
      url: ...
      baseDn: ...
      domain: ...
      realm: ...
      groupsBaseDn: ...
      groupsFilter: ...
      groupsClass: ...
      groupsMemberAtt: ...
      groupsNameAtt: ...
      usersBaseDn: ...
      usersFilter: ...
      usersClass: ...
      usersNameAtt: ...
      usersMemberAtt: ...
      cred-admin: &ldap-portal-cred-admin
        username: ...
        samAccount: ...
        password: ...
      cred-access: &ldap-portal-cred-access
        username: ...
        samAccount: ...
        password: ...

  messaging:
    conn-main: &messaging-conn-main
      url: ...
      proto:
      host:
      port:
      cred-admin: &messaging-main-cred-admin
        username: ...
        samAccount: ...
        password: ...
      cred-access: &messaging-main-cred-access
        username: ...
        samAccount: ...
        password: ...
    conn-stomp: &messaging-conn-stomp
      url: ...
      proto:
      host:
      port:
      cred-admin: &messaging-stomp-cred-admin
        username: ...
        samAccount: ...
        password: ...
      cred-access: &messaging-stomp-cred-access
        username: ...
        samAccount: ...
        password: ...

  rdbms:
    conn-main: &rdbms-conn-main
      host:
      port:
      schema-arkcase: &rdbms-main-cred-schema-arkcase
        username:
        password:
        database:
        schema:
        instance:
    conn-content: &rdbms-conn-content
      host:
      port:
      schema-content: &rdbms-content-cred-schema-content
        username:
        password:
        database:
        schema:
        instance:
    conn-reports: &rdbms-conn-reports
      host:
      port:
      schema-hibernate: &rdbms-reports-cred-schema-hibernate
        username:
        password:
        database:
        schema:
        instance:
      schema-jcr: &rdbms-reports-cred-schema-jcr
        username:
        password:
        database:
        schema:
        instance:
      schema-quartz: &rdbms-reports-cred-schema-quartz
        username:
        password:
        database:
        schema:
        instance:

  reports:
    conn-main: &reports-conn-main
      url:
      cred-admin: &reports-main-cred-admin # Delegated to LDAP ...
        username:
        password:
      cred-access: &reports-main-cred-access # Delegated to LDAP ...
        username:
        password:

  search:
    conn-main: &search-conn-main
      url:
      cred-admin: &search-main-cred-admin # Not fully supported yet ...
        username:
        password:
      cred-access: &search-main-cred-access # Not fully supported yet ...
        username:
        password:

  zookeeper:
    conn-main: &zookeeper-conn-main
      hosts:
      cred-admin: &zookeeper-main-cred-admin # Not fully supported yet ...
        username:
        password:

################################################################################
separator: "ignore me" # Yes, really, ignore this line...
################################################################################

################################################################################
# Here we list what secrets/configs from other charts each chart consumes. We
# add anchor links for ease of navigation (i.e. in VSCode), and for brevity.
#
# With this guide it should be possible to create the configurations for all
# charts and subcharts, to be resolved at runtime.
################################################################################
consumed:
  analytics: # Should we keep this?
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin

  content:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin
    ldap:
      conn-main:
        <<: *ldap-conn-main
        cred-admin:
          <<: *ldap-main-cred-admin
        cred-access:
          <<: *ldap-main-cred-access
    rdbms:
      conn-content:
        <<: *rdbms-conn-content
        cred-access:
          <<: *rdbms-content-cred-schema-content

  core:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin
    content:
      conn-main:
        <<: *content-conn-main
        cred-admin:
          <<: *content-main-cred-admin
        cred-access:
          <<: *content-main-cred-access
    ldap:
      conn-main:
        <<: *ldap-conn-main
        cred-admin:
          <<: *ldap-main-cred-admin
        cred-access:
          <<: *ldap-main-cred-access
      conn-portal:
        <<: *ldap-conn-portal
        cred-admin:
          <<: *ldap-portal-cred-admin
        cred-access:
          <<: *ldap-portal-cred-access
    rdbms:
      conn-main:
        <<: *rdbms-conn-main
        cred-access:
          <<: *rdbms-main-cred-schema-arkcase
    reports:
      conn-reports:
        <<: *reports-conn-main
        cred-admin:
          <<: *reports-main-cred-admin
        cred-access:
          <<: *reports-main-cred-access
    messaging:
      conn-main:
        <<: *messaging-conn-main
        cred-access:
          <<: *messaging-main-cred-access
      conn-stomp:
        <<: *messaging-conn-stomp
        cred-access:
          <<: *messaging-stomp-cred-access
    search:
      conn-main:
        <<: *search-conn-main
        cred-admin:
          <<: *search-main-cred-admin
        cred-access:
          <<: *search-main-cred-access
    zookeeper:
      conn-main:
        <<: *zookeeper-conn-main
        cred-admin:
          <<: *zookeeper-main-cred-admin

  ldap:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin

  messaging:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin

  rdbms:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin

  reports:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin
    core:
      conn-main:
        <<: *core-conn-main
        cred-access:
          <<: *core-main-cred-access
    ldap:
      conn-main:
        <<: *content-ldap-main
        cred-access:
          <<: *ldap-main-cred-access
    rdbms:
      conn-main:
        <<: *rdbms-conn-main
        schema-arkcase:
          <<: *rdbms-main-cred-schema-arkcase
      conn-reports:
        <<: *rdbms-conn-reports
        schema-hibernate:
          <<: *rdbms-reports-cred-schema-hibernate
        schema-jcr:
          <<: *rdbms-reports-cred-schema-jcr
        schema-quarts:
          <<: *rdbms-reports-cred-schema-quartz
    zookeeper:
      conn-main:
        <<: *zookeeper-conn-main
        cred-admin:
          <<: *zookeeper-main-cred-admin

  search:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin
    zookeeper:
      conn-main:
        <<: *zookeeper-conn-main
        cred-admin:
          <<: *zookeeper-main-cred-admin

  zookeeper:
    acme:
      conn-main:
        <<: *acme-conn-main
        cred-admin:
          <<: *acme-main-cred-admin