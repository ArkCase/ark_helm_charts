{{- $oidc := (include "arkcase.oidc" $ | fromYaml) -}}
{{- if $oidc }}
  {{- if and (hasKey $oidc "legacyMode") (include "arkcase.toBoolean" $oidc.legacyMode) }}
    {{- with $oidc.clients.arkcase }}
oidc: {{- . | toYaml | nindent 2 }}
    {{- else }}
      {{- fail "When using OIDC legacy mode, you must include a client definition named 'arkcase'" }}
    {{- end }}
  {{- else }}
oidcClientConfigs: {{- $oidc.clients | toYaml | nindent 2 }}
  {{- end}} 

application:
  properties:
    logoutUrl: "/oauth-url"
{{- else }}
# OIDC is not active
{{- end }}
