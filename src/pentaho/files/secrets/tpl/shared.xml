{{- /* This file should be mounted as /app/pentaho/.kettle/shared.xml */ -}}
{{- $foia := (include "arkcase.foia" $ | fromYaml) -}}
{{- if $foia -}}
<?xml version="1.0" encoding="UTF-8"?>
<sharedobjects>
  <connection>
    <name>ArkCase Database</name>
    {{- with (include "arkcase.db.schema" (dict "ctx" $ "schema" "arkcase") | fromYaml) }}
    <server>{{ .hostname }}</server>
    <port>{{ .port }}</port>
    <database>{{ .database }}</database>
    <username>{{ include "arkcase.xmlEscape" .username }}</username>
    <password>{{ include "arkcase.xmlEscape" .password }}</password>
    <type>{{ .reports | upper }}</type>
    {{- end }}
    <access>Native</access>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <!--
      <attribute>
        <code>ATTRIBUTE_NAME</code>
        <attribute>ATTRIBUTE_VALUE</attribute>
      </attribute>
      -->
    </attributes>
  </connection>
</sharedobjects>
{{- end -}}
