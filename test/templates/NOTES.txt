---
subsystem: {{ (include "arkcase.subsystem.name" $) | quote }}
config-resource: {{- include "arkcase.subsystem-access.conf" $ | nindent 2 }}

---
CREDS=[{{ include "arkcase.subsystem-access.name.admin" $ }}]
CREDS=[{{ include "arkcase.subsystem-access.name.cred" $ }}]
CREDS=[{{ include "arkcase.subsystem-access.name.cred" (dict "ctx" $ "type" "cred-access-hollywood") }}]

---

ENABLED = {{ not (empty (include "arkcase.subsystem.enabled" $)) }}
EXTERNAL = {{ not (empty (include "arkcase.subsystem.external" $)) }}

---
{{ include "arkcase.subsystem-access.env.cred" (dict "ctx" $ "type" "schema-arkcase" "key" "mapped" "name" "${key:l}_${key:u}_MY_${subsys:u}_${subsys:l}_SUPER_var_${type}_${type:l}_${type:u}" "optional" "false") }}
---
{{ include "arkcase.subsystem-access.env.admin" (dict "ctx" $ "subsys" "rdbms" "conn" "crap" "key" "username") }}
{{ include "arkcase.subsystem-access.env.admin" (dict "ctx" $ "subsys" "rdbms" "key" "password") }}
{{ include "arkcase.subsystem-access.env.cred" (dict "ctx" $ "subsys" "rdbms" "type" "schema-pentaho" "key" "username") }}
{{ include "arkcase.subsystem-access.env.cred" (dict "ctx" $ "subsys" "rdbms" "type" "schema-pentaho" "key" "password") }}
---
{{ include "arkcase.subsystem-access.volumeMount.admin" (dict "ctx" $ "subsys" "rdbms" "key" "username") }}
{{ include "arkcase.subsystem-access.volumeMount.admin" (dict "ctx" $ "subsys" "rdbms" "key" "password") }}
{{ include "arkcase.subsystem-access.volumeMount.cred" (dict "ctx" $ "subsys" "rdbms" "type" "schema-pentaho" "key" "username") }}
{{ include "arkcase.subsystem-access.volumeMount.cred" (dict "ctx" $ "subsys" "rdbms" "type" "schema-pentaho" "key" "password") }}
---
{{ include "arkcase.subsystem-access.volume.admin" (dict "ctx" $ "subsys" "rdbms") }}
{{ include "arkcase.subsystem-access.volume.admin" (dict "ctx" $ "subsys" "rdbms") }}
{{ include "arkcase.subsystem-access.volume.cred" (dict "ctx" $ "subsys" "rdbms" "type" "schema-pentaho") }}
{{ include "arkcase.subsystem-access.volume.cred" (dict "ctx" $ "subsys" "rdbms" "type" "schema-pentaho") }}
---
external-admin: [{{ (include "arkcase.subsystem-access.external.admin" $) }}]
external-schema-arkcase: [{{ (include "arkcase.subsystem-access.external.cred" (dict "ctx" $ "type" "schema-arkcase")) }}]
---
ALL
---
{{ include "__arkcase.subsystem-access.all.render" $ | nindent 0 }}
---
ENVS: {{- include "arkcase.subsystem-access.all.env" $ | nindent 2 }}
VOLUME_MOUNTS: {{- include "arkcase.subsystem-access.all.volumeMount" $ | nindent 2 }}
VOLUMES: {{- include "arkcase.subsystem-access.all.volume" $ | nindent 2 }}
---
